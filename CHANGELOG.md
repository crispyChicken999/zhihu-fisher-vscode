# 更新日志 (Changelog)

本文档记录了"知乎摸鱼"(Zhihu Fisher) VS Code 扩展的所有重要更改。

## [0.3.3] - 2025-08-25

### Features

- 新增了查看更新日志的命令，用户可以通过命令面板快速访问更新日志页面，了解扩展的最新变化。

### Bug Fixes

- 修复了搜索结果 URL 解析逻辑，优先解析特定回答的链接，避免了搜索结果点击后第一个回答不是搜索预览回答的情况。
- 修复了 W/S 键切换上一条/下一篇内容时，同时按下 Ctrl/Meta/Shift/Alt 键时误触发上下篇切换的问题，现在只有在没有按下这些键时才会触发切换。
  - > 比如 Ctrl + W 在 VSCode 中意味着关闭当前的窗口，而 W 键会触发跳转上篇内容的操作，这样导致了用户体验不好，故仅在单独按下 W/S 键时才会触发切换。
- 修复了取消收藏时，二次确认弹窗的按钮文字歧义问题，改为了确认/取消（如果取消是英文 cancel 的话，说明 vscode 使用的语言是英文，这里不做适配了，如果觉得不合理的话就切换成 vscode 的中文包就好了）。
- 修复了详情页回答的内容不会自动换行的问题，给 p 标签添加了 `word-break: break-word;` 样式，确保例如`??????????...x100...????`能够正确换行显示。
- 修改评论区加载错误时，重新加载的按钮类名为 zhihu-reload-comments-btn，避免影响布局。
- 修复了 package.json 中的关键词数组，确保包含所有相关关键词，让更多人能够搜索到我们这个插件。

## [0.3.2] - 2025-08-19

### Features

- 新增回答跳转选择器功能，用户可以在回答列表中快速选择跳转到指定回答，提升了浏览体验。
- 新增对于内部链接的处理，当内容或者评论中包含了知乎内部链接时，提供在 VSCode 中打开的选项，避免了需要在浏览器才能查看的情况。
- 新增输入指定链接浏览内容的功能，在侧边栏的更多操作中添加了输入链接的选项，用户可以直接输入知乎内容的链接来浏览相关内容。
- 新增调试模式，如果遇到了问题可以启动调试模式，浏览器将会以前台的方式启动，方便调试和查看问题。
- 新增智能伪装模式选择指定类型的功能，用户可以选择想要伪装的文件类型，避免了明明是前端开发，VSCode 却显示为 Python 文件的情况。
- 新增了更多的伪装模式类型选择，尽可能覆盖用户的需求。
- 新增页面跳转功能，在“当前第 X 个回答”处使用了选择器，用户可以快速跳转到指定的回答（仅已加载的范围内），提升了浏览体验。
- 优化了样式设置面板的布局和样式，使用 Tab 页式展示不同的设置选项，提升了用户体验。
- 优化了页面的整体样式，包括间距、字体大小、颜色等，使得阅读体验更加舒适。
- 页面添加平滑滚动效果，其是通过 CSS 的 scroll-behavior: smooth 属性实现的，提升了用户体验。（效果未知，可能 win11 有用？）

## [0.3.1] - 2025-08-13

### Features

- 新增赞同/中立/不赞同的按钮，看到喜欢的回答或文章，现在也支持点赞了（状态更新会有延迟，请勿频繁操作）。
- 优化了评论区作者标签的样式，避免突兀。
- 优化了评论区表情包的大小，迷你模式下也能看清表情包了。
- 调整了正常模式下 answer-meta 元素（就是点赞、评论数、更新/发布时间那个板块）的布局，放到了回答的后面，更符合阅读习惯。
- 添加了对评论区关闭的情况处理，若评论区已关闭，则在评论区区域显示"评论区已关闭"的提示，避免用户看到有评论数，但是加载出来数量为 0 以为是插件的 bug。

### Bug Fixes

- 修复了文章详情页点赞数获取错误的问题，现在能够正确显示点赞数。
- 调整了收藏 Item Tooltip 的提示信息，把收藏时间更正为发布时间，避免误导用户。

## [0.3.0] - 2025-08-04

### Features

- 新增 MathJax 解析功能，支持在文章中渲染数学公式，提升了学术内容的阅读体验。
- 优化了评论区 footer 等元素的样式，更加美观。
- 优化了 HTML template 中的 外部 script 的加载顺序，使用 `async` 属性，避免阻塞页面渲染。
  > 因为引入了外部脚本，所以刚开始的话页面会卡一下，状态会更新不及时，等待脚本加载完就好了，后续都会命中缓存也就不会卡顿了。

### Bug Fixes

- 修复了评论区作者标签显示不一致的问题，现在评论区的作者标签与子评论弹窗中的标签保持一致。
- 调整了评论区作者 a 标签 title 属性的内容默认值，当作者没有签名时，显示默认语句，避免了空白的情况。
- 调整了 sidebar item 的原文链接来源，现在直接使用回答的 URL，避免了原文链接不一致的问题。

## [0.2.9] - 2025-08-01

### Features

- 新增键盘按 Ctrl+↑ 和 Ctrl+↓ 可以快速切换上一条/下一篇内容的功能，无需在侧边栏点击文章，更方便地进行摸鱼。
- 新增 WASD 按键绑定，W/S 切换上一条/下一篇内容，A/D 切换上一条/下一篇回答，提升了用户体验。
- 新增沉浸模式下工具栏的自定义设置，可以启用/隐藏指定按钮，还可以调整他们的顺序。
- 新增沉浸模式下工具栏的快捷关闭按钮，点击可以快速隐藏当前按钮。
- 优化了外观设置弹窗的样式，更加美观。
- 沉浸模式下可以直接点击评论区的数字来查看评论区。

### Bug Fixes

- 修复了详情页中引用链接太长无法换行的问题，添加 word-break: break-all;样式，确保长链接能够正确换行显示。

## [0.2.8] - 2025-07-29

### Bug Fixes

- 修复了特定回答模式下，评论数量解析为 0 的问题，确保评论数能够正确显示。
- 优化了评论数的显示格式，提升了用户体验。

## [0.2.7] - 2025-07-28

### Features

- 优化了沉浸模式下的布局样式、分页信息展示、点赞数|评论数的显示方式，提升了用户体验。
- 优化了侧边栏 tooltip 的内容标签，新增原文链接，点击可以浏览器查看，可以不用按 alt 也能悬停鼠标。
- 调整了评论区的作者 title 属性，更加清晰地显示作者信息。
- 去除了文章内容中的广告卡片、咨询卡片等不必要的元素，提升了阅读体验。
- 隐藏了 empty-paragraph（空段落）元素，避免了页面中出现多余的空白段落，使得页面更加紧凑。
- 新增爬取不到回答的错误提示页面，针对问题被知乎删除的情况，提供了清晰的错误提示，避免用户困惑，避免了页面卡住的问题。
- 评论区内容新增表情包解析，无图模式显示为"\[doge\]"，其他模式则为实际的表情包。

## [0.2.6] - 2025-07-22

### Features

- 新增 Linux 系统支持，设置浏览器提供 Linux 版本的说明，方便用户指定对应的浏览器路径。
- 新增评论区 \[作者\] 回复的标识，这里的作者指的是文章/回答的作者。
- 增强了评论区超链接的解析规则，现已支持解析\[图片\] 、\[查看动图\]、\[吃瓜\]（表情包）的链接，能够正确显示评论中的图片和动图。
- 优化了评论区的及子评论弹窗的样式，新增 reply_to_author 字段，方便知道该评论是回复谁的。
- 优化了子评论区弹窗的布局，顶部的评论设置了最大高度，为底部评论区域留出足够的空间。
- 优化了无图模式下评论区的图片解析方式，现在会显示一个超链接，避免了评论区只有一张图片但是显示为空导致的体验不佳的问题。

### Bug Fixes

- 修复了回到顶部按钮一直显示的问题，应该是滚动了一定距离后才显示。

## [0.2.5] - 2025-07-17

### Features

- 新增灰色模式功能，用户可以在外观设置中启用灰色模式，将页面所有内容转为灰色显示，降低色彩干扰，防刺眼。
- 新增沉浸模式下侧边工具栏的收起/展开功能，进一步提升沉浸式学习 ~~(摸鱼)~~ 体验。

### Bug Fixes

- 修复了文章内容 Blockquote 模块的颜色，使得其可以与用户自定义的颜色设置保持一致。

## [0.2.4] - 2025-07-14

### Features

- 新增评论内容图片处理功能，优化评论和子评论的显示样式。现在在评论区也能够查看评论的图片了，支持小图模式下的图片缩放。

## [0.2.3] - 2025-07-14

### Bug Fixes

- 修复了在 VSCode 设置中无法配置 Cookie 的问题。

## [0.2.2] - 2025-07-11

### Features

- 新增收藏夹侧边栏，用户可以查看和管理自己创建的收藏夹，支持新增、删除、刷新收藏夹。
- 推荐列表、搜索列表及文章详情页，现在支持收藏功能，用户可以将感兴趣的内容添加到收藏夹中，方便后续查看。
- 收藏夹列表采用惰性加载方式，避免多次调用接口导致 Cookie 失效的问题。提供刷新的功能，方便用户在有需要的时候进行刷新。
- 新增智能伪装模式，当我们切换到其他页面的时候，摸鱼页面自动修改图标和名称为代码文件，以假乱真，避免被发现。用户只有切回来的时候才会显示真实的标题。
- 侧边栏新增切换智能伪装模式的按钮，用户可以通过点击按钮来切换智能伪装模式。同时也可以在详情页面的外观设置中进行调整。
- 文章详情页增加智能伪装模式的切换按钮，用户可以在文章详情页直接切换智能伪装模式。
- 知乎摸鱼使用说明文档已更新，提供了收藏、智能伪装模式的使用说明和相关配置。

### Bug Fixes

- 针对敏感图片进行了进一步的处理，避免在加载过程中出现敏感图片导致的加载失败问题。
- 调整了知乎回答中的外链处理逻辑，直接显示原链接。
- 优化了插件关闭时候的 cleanUp 方法，进一步减少了内存泄漏的可能性。
- 修复了沉浸模式按钮提示被遮挡的问题。
- 优化了内容加载逻辑，点击回答则优先加载回答的内容而不是直接开始加载全部内容。确保了内容与侧边栏 tooltip 一致性。
- 优化了 webviewID 的生成逻辑，同一个问题不同回答现已能够同时开启，提升了用户的使用体验。

## [0.2.1] - 2025-07-07

### Features

- 新增推荐列表【不喜欢该内容】【不喜欢该作者】的功能，用户可以点击侧边栏的对应按钮来不喜欢推荐内容或屏蔽作者。

### Bug Fixes

- 调整了浏览器打开的逻辑，现在可以直接打开回答的完整 URL，方便用户在浏览器中查看。

## [0.2.0] - 2025-07-02

### Features

- 新增了重启扩展的功能，用户可以通过命令面板快速重启扩展，方便调试和开发。
- 新增了故障排除指引，用户可以通过命令面板快速访问，提供常见问题的解决方案。
- 新增了捐赠支持，用户可以通过命令面板快速访问捐赠页面，支持开发者继续改进扩展。
- 优化了欢迎界面，提供更清晰的指引和操作说明。
- 优化了文章阅读页面的样式，提升用户体验。调整了图标的显示。
- 优化了侧边栏更多操作的排版布局，更加美观和易用。

## [0.1.9] - 2025-06-30

### Features

- 支持小图模式自定义缩放比例，在外观设置中可以进行调整，也可以在设置中修改。
- 推荐、热榜、搜索，支持解析【文章】类型的链接，能够直接查看文章内容，并且对其内容进行了优化。
- 新增关于和使用说明命令，用户可以通过命令面板快速访问。
- 新增赞赏入口，如果帮助到您，欢迎各位支持开发者喝杯咖啡，感谢您的支持！(づ￣ 3 ￣)づ
- 更换了更加清晰和美观的图标，看着赏心悦目。

### Bug Fixes

- 优化了欢迎界面和支持开发者的文档，提供更清晰的指引。
- 优化了文章阅读页面的部分内容排版，提升阅读体验。
- 优化了请求方式，去除不必要的 BEC 参数，避免用户误操作导致 Cookie 失效。
- 优化了媒体展示模式切换时，侧边栏图标的显示方式，避免切为无图模式时，侧边栏 item 仍展示图片的情况。
- 优化了 Loading 界面的图片展示方式，支持小图模式下的图片缩放，避免摸鱼被发现。
- 简化 Cookie 的存储模式，现在用户可以在设置中直接输入 Cookie。

## [0.1.8] - 2025-06-24

### Features

- 新增侧边栏缩略图展示，若爬取到图片链接则显示出来，否则就显示默认的图标
- 在侧边栏中新增放大缩略图查看和浏览器打开的功能，方便用户查看图片和浏览器查看文章

### Bug Fixes

- 修复了推荐列表出现未知链接的问题，原因是推荐中有部分是知乎专栏，只解析回答的连接
- 优化了加载中的页面样式，适配媒体显示模式，能够展示缩略图，优化布局避免元素被遮挡
- 优化了侧边栏 Tooltip 的内容及排版方式，更加清晰易读

## [0.1.7] - 2025-06-17

### Bug Fixes

- 调整工具栏最大高度，从 432px 修改为 450px，以改善布局适应性

## [0.1.6] - 2025-06-17

### Features

- 新增 Cookie 加载失败的提示界面，方便用户设置 Cookie，提供快捷跳转知乎的按钮
- 文章页面中新增意见反馈入口，同时侧边栏也添加了意见反馈入口，方便用户提意见
- 文章元素样式同步，标题、h1-6 都能够应用用户自定义的颜色设置，方便摸鱼，不然这么大个白色标题容易被发现。
- 加载中的界面同样是做了样式同步，避免加载中白色文字过于显眼的问题
- 侧边工具栏优化样式，页面高度不足时自动换行

## [0.1.5] - 2025-05-15

### Bug Fixes

- 修复了 Puppeteer 启动浏览器提示 ProtocolError: Connection closed 的问题，延长了浏览器的超时时间
- 修复了 Puppeteer 的启动页面提示 Input.dispatchMouseEvent timed out 的问题，跟上一点应该是同样的问题
  > 因为查看 Puppeteer 的 [issues](https://github.com/puppeteer/puppeteer/issues/10144)，发现这是一个概率问题，所以我们添加了重试机制，失败了就再试一次，就能尽可能避免这个问题
- 修复了文章页面，回答中的引用链接显示为空白的问题，优化了样式并能够显示其标题

## [0.1.4] - 2025-05-07

### Features

- 新增沉浸模式，隐藏不必要的元素，仅展示文章标题和内容，其他信息和按钮收纳至侧边栏
- 新增评论区功能，用户可以查看当前回答的评论，以及评论的子评论，不支持发布/回复评论（因为接口有反爬参数限制，故放弃）
- 优化了页面样式，增加功能的按键绑定，方便快速操作

#### Bug Fixes

- 重构了 webview 的 html 代码生成规则，划分成不同的模块，便于后续维护
- 修复了长时间加载不出来的问题，可能是 Cookie 过期了，新增 Cookie 过期的提示及更新按钮
- 修复侧边栏的 item 没 excerpt 的情况，做了一下兼容，鼠标悬停时会显示完整的标题+内容
- 调整了图片视频的显示方式对应的说明文案，避免用户误解找不到入口
- 性能优化，优化了代码书写方式，避免不必要的 DOM 操作，提升性能，删除了不必要的实例对象引用

## [0.1.3] - 2025-04-29

### Features

- 页面新增样式设置按钮，用户可以自定义页面的背景颜色、字体大小等
- 页面设置弹窗支持通过键盘的`.`键来快速打开和关闭
- 优化了文章回答页的样式，针对页面的媒体资源（图片、资源）进行处理，提供隐藏模式、迷你模式和正常模式

## [0.1.2] - 2025-04-28

### Features

- 修改了自定义浏览器路径的校验规则，避免 Mac 系统无法配置路径的问题
- 添加了 Mac 系统配置自定义浏览器的说明，指引用户如何获取路径及如何配置
- 修改了标题栏按钮的名称，优化了弹窗的文案，使其更加符合逻辑

## [0.1.1] - 2025-04-25

### Features

- 支持使用本地的 Chrome 浏览器，可以不用安装 Puppeteer 的 Chrome 浏览器了
- 在标题栏的`...`处增加"安装浏览器"和"自定义爬虫浏览器"的入口，方便用户操作
- 优化流程及提示，避免没安装浏览器/配置浏览器地址出错后，页面卡住导致用户懵逼
- 优化了自定义爬虫浏览器的 change 事件，及时更新视图

## [0.1.0] - 2025-04-24

### Features

- 添加了文章切换图片显示的快捷键，为`/`，按下后可以切换图片的显示和隐藏
- 优化了在没有安装爬虫浏览器时的流程处理，引导用户安装，确保功能的正常使用
- 重构了代码，数据加载更加顺畅

### Bug Fixes

- 修复了没有安装 Puppeteer 的 Chrome 浏览器时，加载文章卡住、推荐列表加载失败等的问题

## [0.0.9] - 2025-04-23

### Features

- 优化了 Cookie 的处理方式，增加了获取 Cookie 的提示，避免用户输入错误
- 对 Cookie 清除操作进行了优化，确保页面能够正确响应

## [0.0.8] - 2025-04-22

### Features

- 新增搜索功能，侧边栏可以搜索相关问题
- 优化了上一条/下一条按钮的样式，增加了 disabled 效果

### Bug Fixes

- 修复了页面加载完成后，需要点一下才能左右切换上一个/下一个回答的问题

## [0.0.7] - 2025-04-21

### Features

- 新增快捷键切换上一个/下一回答，按键盘的`←`和`→`来切换
- 优化了文章页面的样式，增加回答的点赞数、评论数等信息
- 优化了文章加载页的样式，新增问题简介的滚动条，避免内容过长导致页面显示不全
- 支持更多版本的 VSCode，更新报错的话请卸载重装

### Bug Fixes

- 修复了加载完成后，底部栏仍提示正在加载的问题

## [0.0.6] - 2025-04-20

### Features

- 重构代码，简化流程

## [0.0.1] - [0.0.5] - 2025-04-19

### Features

- 初始版本发布
- 加载知乎热榜
- 加载知乎推荐
- 查看知乎回答的内容
- 提供显示/隐藏图片的功能，避免摸鱼被发现
