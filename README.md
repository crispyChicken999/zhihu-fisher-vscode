# 🐟 知乎摸鱼 🐟 (Zhihu Fisher)

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Version](https://img.shields.io/badge/version-0.0.9-green.svg)

使用 VSCode，浏览知乎的推荐及热榜内容，快乐摸鱼。

## 🔮 背景 🔮

- 其实就是想上班摸会鱼，直接网页刷知乎容易被抓包，而且网页有很多图片，别人一看你就知道是在摸鱼。
- 然后就想在 VSCode 中刷知乎，结果发现那些插件基本都不更新了根本用不了，索性直接写了一个。
- 目前基本功能有了，但是写的有些乱，后续会慢慢优化。
- 刚写完还有很多 bug，但是能用 😂，如果卡住了更多回答加载不出，那就关了再开。
- 欢迎推荐给你的同事，让他们也能在 VSCode 中愉快摸鱼！有更多的意见和建议欢迎评论。

## 支持的 VSCode 版本

- **1.82.0** 及以上版本

## 🎉 使用方式 🎉

1. 安装后在 VSCode 侧边栏中找到 📖 图标
2. 按照指示安装 Puppeteer 的 Chrome 浏览器，安装完成后重启 VSCode
   > - 关于这个浏览器，因为用到这个 Puppeteer 这个库，其原理就是在后端模拟打开知乎，模拟人在浏览，没浏览器就没办法加载页面了😥。就需要手动安装一下，后续我会给一个配置，让用户指定自己本地的 chrome.exe，这样就不用安装了。但是现在没办法还是手动安装一下吧。😂
   > - 这个浏览器安装完成后会在：`C:\Users\用户名\.cache\puppeteer\chrome\win64-135.0.7049.84\chrome-win64\chrome.exe`。
3. 输入知乎的 Cookie，然后就会自动加载推荐及热榜内容

   > - **Cookie 获取方式**：
   > - 在知乎网页端登录后，按 F12 打开开发者工具，切换到"网络"选项卡，选择一个请求，找到请求头中的`Cookie`字段，复制其值，粘贴到 VSCode 中输入框即可。
   > - 如果还是不清楚，可以参照下图：
   > - ![获取Cookie的方式](https://raw.githubusercontent.com/crispyChicken999/crispyChicken999.github.io/refs/heads/main/cookie.webp)

4. 加载完成后点击内容即可查看，就可以愉快🐟摸鱼🐟啦~

## 🚀 主要功能 🚀

1. 加载知乎热榜
2. 加载知乎推荐
3. 加载搜索结果
4. 查看知乎回答的内容，支持切换上一个/下一个回答
5. 提供显示/隐藏图片的功能，避免摸鱼被发现
6. 提供快捷键，键盘左右箭头可以切换上一个/下一个回答，按`/`可以切换图片的显示和隐藏

## 💥 Changelog 💥

- 0.1.0

  - 修复了没有安装 Puppeteer 的 Chrome 浏览器时，加载文章卡住、推荐列表加载失败等的问题。
  - 优化了在没有安装爬虫浏览器时的流程处理，引导用户安装，确保功能的正常使用。
  - 重构了代码，数据加载更加顺畅。
  - 添加了文章切换图片显示的快捷键，为`/`，按下后可以切换图片的显示和隐藏。

- 0.0.9

  - 优化了 Cookie 的处理方式，增加了获取 Cookie 的提示，避免用户输入错误。
  - 对 Cookie 清除操作进行了优化，确保页面能够正确响应。

- 0.0.8

  - 修复了页面加载完成后，需要点一下才能左右切换上一个/下一个回答的问题。
  - 优化了上一条/下一条按钮的样式，增加了 disabled 效果。
  - 新增搜索功能，侧边栏可以搜索相关问题。

- 0.0.7

  - 修复了加载完成后，底部栏仍提示正在加载的问题。
  - 优化了文章页面的样式，增加回答的点赞数、评论数等信息。
  - 优化了文章加载页的样式，新增问题简介的滚动条，避免内容过长导致页面显示不全。
  - 新增快捷键切换上一个/下一个回答，按键盘的`←`和`→`来切换。
  - 支持更多版本的 VSCode，更新报错的话请卸载重装。

## 📝 TODO 📝

1. ~~重构代码，简化流程~~ **(v0.0.6 已重构)**
2. ~~增加更多功能，比如搜索~~、收藏等 **(v0.0.8 已实现搜索功能)**
3. ~~详情页面添加回答跳转功能~~ **(v0.0.7 已实现分页跳转)**
4. ~~支持快捷键切换图片隐藏和显示~~ **(v0.1.0 已实现)**
5. 支持用户指定自己的 Chrome.exe 浏览器地址，就不用下载新的了
6. 支持小图模式，比如想要摸鱼，但是也想偷偷看图片
7. 支持设置文章的各种样式，比如字体大小、颜色等

## 🐞 已知问题 🐞

1.  推荐列表可能加载不出来，可能跟 Cookie 中 BEC 参数有关，那么需要你前往知乎首页，点击推荐切换到推荐列表，然后刷新页面，获取新的 Cookie，粘贴到 VSCode 中即可。（我猜这个参数可能记录了用户的操作，比如之前切换到热榜列表，那么下次打开知乎也切到热榜，所以需要切到推荐后再拿 Cookie）
2.  ~~文章和推荐列表加载出不来，可能是由于 puppeteer 没安装浏览器，CMD 运行一下`npx puppeteer browsers install chrome@135.0.7049.84`，安装浏览器，安装完成后重启一下 VSCode。~~**（v0.1.0 已修复）**
3.  欢迎在 Issues 中反馈问题，或者直接在插件中反馈问题，我会尽快修复。

## 🔧 实现原理 🔧

基于 VSCode 插件脚手架，使用 Puppeteer 来模拟浏览知乎，抓取内容并渲染成 HTML，最后在 VSCode 中显示。

## 💖 欢迎赞赏 💖

💰 一分也是爱，您的支持是我更新的最大动力！如果帮到你麻烦给个好评，感谢~（点一下插件名字旁边的五星即可 🎉，感谢！）

![赞赏码](https://raw.githubusercontent.com/crispyChicken999/crispyChicken999.github.io/main/code.jpg)
